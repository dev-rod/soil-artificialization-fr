###### Lancer l'application #####

le 01_start.R avec uniquement les lignes precedant ## Create Common Files ----
permet de lancer l'appli via la console :
utile lorsqu'on ajout des @import
golem::run_dev()

sinon juste sur le fichier app.R lancer

################################
DOC

https://artificialisation.developpement-durable.gouv.fr/determinants-artificialisation-2009-2022
https://www.moncompteformation.gouv.fr/espace-prive/html/#/formation/recherche/32439762900118_MR121B23/32439762900118_PDL-MR121B23-MIX-44N/certification?contexteFormation=ACTIVITE_PROFESSIONNELLE
https://artificialisation.developpement-durable.gouv.fr/mesurer-la-consommation-despaces/analyse-donnees-consommation-espaces#paragraph--2164

https://thinkr-open.github.io/golem/index.html
https://thinkr-open.github.io/golem/articles/b_dev.html
https://epirhandbook.com/fr/shiny.html
https://thinkr.fr/cartographie-interactive-avec-r-la-suite/#Une_carte_interactive_avec_le_package_tmap

https://rstudio.github.io/shinydashboard/get_started.html
https://rstudio.github.io/bslib/
https://github.com/dreamRs/fresh
https://echarts.apache.org/examples/en/index.html#chart-type-surface
https://echarts4r.john-coene.com/
https://rdrr.io/cran/shinydashboard/man/infoBox.html
https://search.r-project.org/CRAN/refmans/shinydashboard/html/renderValueBox.html
https://github.com/ColinFay/golemexamples/blob/master/golemshinydash/R/app_ui.R
https://github.com/ColinFay/tidytuesday201942/blob/master/R/mod_dataviz.R

# annotations
@noRd         pas de documentation à générer
@import       packages à importer
@importfrom   fonctions de packages à importer

# pour génerer la documentation
dvtools::document()

pour ajouter des paquets en remote
Ex remotes::install_github('r-tmap/tmap')
tester use_git_remote(name = "foo", url = "https://github.com/<OWNER>/<REPO>.git")

# pour avoir l'autoreload, executer la commande suivante dans la console
golem::add_rstudioconnect_file().
# + add in dev/run_dev.R script after document_and_reload() and before runApp()
options(shiny.autoreload = TRUE)




Ressources
# Les enjeux de l’artificialisation des sols : diagnostic
# https://www.ecologie.gouv.fr/sites/default/files/Les%20enjeux%20de%20l%E2%80%99artificialisation%20des%20sols.pdf

Lecture livre thinkr https://engineering-shiny.org/successful-shiny-app.html

# 1 resp projet et des développeurs par module en arborescence

# les modules
https://shiny.posit.co/r/articles/improve/modules/

# package R
# depuis https://engineering-shiny.org/structuring-project.html
https://r-pkgs.org/
https://kbroman.org/pkg_primer/


Utilisation de Golem de thinkr
# https://github.com/ThinkR-open/golem
en fonction de la version de R installée,

Installe les paquetages pour une app shiny avec la version de rocker/verse adapatée
prenant en compte les paquets de l'appli via le renv pour figer l'appli
générant le dockerfile a envoyer dans le fichier de ci (ex .gitlabci.yml)

Désactiver dans les options globales > paquets > url securisee
car pas le certificat adapté et risque d'échec d'installation des paquets
une seule fois dans rstudio
install.packages("golem")

nouveau projet > nouveau répertoire > nom de projet sans [espace, tiret bas ou tiret du 8] en snakeCase > sélectionner "package for shiny app using golem"
laisser options par defaut, et les paquets s'installer


S'aider de la doc en allant dans boite à droite > paquets > chercher "golem" > sous-rechercher "vignettes" > cliquer sur vignettes > liste des vignettes

Regarder la documentation de la vignette "c_deploy"" pour déployer

# Pour initialiser le dossier de déploiement avec renv
# https://github.com/ThinkR-open/dockerfiler
install.packages("dockerfiler")

# Génération des fichiers pour l'environnement de déploiement
golem::add_dockerfile_with_renv(output_dir = "deploy")

# Génération des images
Suivre les instructions du fichier deploy/readme

# ajouter des paquets en dépendances (dans le fichier DESCRIPTION au final)
usethis::use_package("timechange")
usethis::use_package("lubridate")
puis jouer devtools::load_all()

# helpers de création d'un module Example
golem::add_module("01_import", fct = "readr", utils = "ui")
# de fichier utils$ et fct*
golem::add_utils()
golem::add_fct().

adopter fonctionnement par module, stratégie du petit r ou R6 pour la communication client serveur et une structuration par séparation des logiques applicative et métier

le dossier R ne doit contenir aucun sous-dossier


# autre packages / app demo

https://r-pkg.org/
https://github.com/search?q=language%3AR&type=repositories
https://cran.r-project.org/web/views/WebTechnologies.html
https://cran.r-project.org/web/views/Databases.html
https://cloudyr.github.io/
https://developer.mozilla.org/fr/
https://www.freecodecamp.org/

# pour mesurer tailles des fichiers
https://github.com/hrbrmstr/cloc

minify css
https://github.com/hrbrmstr/cloc

example ap with bootstrap4
http://www.github.com/ColinFay/tidytuesday201942

example with database
https://engineering-shiny.org/databasedemo/

example with html template
https://engineering-shiny.org/grayscale/


example with shiny future
https://engineering-shiny.org/shinyfuture/

accessibilité d'un site web
https://github.com/IBMa/equal-access
https://www.webaccessibility.com/get-your-free-web-accessibility-health-score/


# Medias
https://www.ouest-france.fr/pays-de-la-loire/la-varenne-49270/dans-les-mauges-deux-freres-eleveurs-produisent-une-energie-verte-pour-un-millier-de-foyers-43d82c7c-7e06-11ec-822e-99566958f647#:~:text=%C3%80%20La%20Varenne%2C%20commune%20d%C3%A9l%C3%A9gu%C3%A9e,%2C%20en%20proche%20Loire%2DAtlantique.

# Mirroring gitlab github
# https://docs.gitlab.com/ee/user/project/repository/mirror/push.html
